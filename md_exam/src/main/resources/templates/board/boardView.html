<!DOCTYPE html>
<html lang="ko">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M.S.P | 게시판 > 게시물 상세보기</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" th:href="@{/css/board/boardView.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">


</head>

<body>


<div th:replace="~{/fragments/header.html :: fragment-header}"></div>

    <main>
        <div class="main-container">
            <div class="main-title">
                <div class="bg-title">
                    <h1>게시물 보기</h1>
                </div>
            </div>
            <div class="section-container">
                <aside>
                    <ul>
                        <li class="side-bg-wrap">
                            <h2 class="side-bg">Review</h2>
                        </li>
                        <li>
                            <a th:href="@{/board/boardReview}">
                                약 복용후기
                            </a>
                        </li>
                        <li class="active">
                            <a th:href="@{/board/boardNotice}">
                                공지사항
                            </a>
                        </li>

                        <li>
                            <a th:href="@{/board/boardQnA}">
                                Q n A
                            </a>
                        </li>
                        <li>
                            <a th:href="@{/board/boardList}">
                                약 목록
                            </a>
                        </li>
                    </ul>
                </aside>

                <div class="content-wrap">
                    <div class="subject">
                        <div class="subject-title">
                            <h2>[[${board.subject}]]</h2>
                        </div>

                        <div class="board-info">
                            <p>
                                작성자 : <span class="writer">[[${board.writer}]]</span>
                                댓글수 : <span class="comment-cnt">1</span>
                                조회수 : <span class="visit">[[${board.visit}]]</span>
                                작성일 : <span class="reg-date">
                                            <th:block>[[${#temporals.format(board.reg,'yy.MM.dd')}]]</th:block>
                                        </span>
                            </p>
                        </div>
                        <hr>
                    </div>

                    <div class="content">
                        <div id="text-box" class="text-box">
                            <input type="hidden" id="content" th:value="${board.content}">


                        </div>
                    </div>

                    <hr>
                    <h5>첨부파일</h5>
                    <div class = "filebox-wrap" th:if="${ !files.isEmpty() }">

                        <div class = "filebox" th:each="file : ${files}">

                            <th:block th:if="${file.ext eq '.jpg' OR file.ext eq '.png'}">
                                <div class="img-box">
                                    <img th:src="@{|/${file.folderName}/${file.savedFileName}|}" alt="">
                                    <p class="img-btn">
                                        <a th:href="@{/board/download?(configCode=${configCode}, savedFileName=${file.savedFileName})}">
                                            <p>[[${file.savedFileSize/1000}]]byte<button class="btn">다운로드</button></p>
                                        </a>
                                    </p>
                                </div>
                            </th:block>

                            <th:block th:unless="${file.ext eq '.jpg' OR file.ext eq '.png'}">
                                [[${file.orgName}]]
                                <a th:href="@{/board/download?(configCode=${configCode}, savedFileName=${file.savedFileName})}">
                                    <p>[[${file.savedFileSize/1000}]]byte<button class="btn">다운로드</button></p>
                                </a>
                            </th:block>
                        </div>
                    </div>
                    <div class="file-box" th:unless="${ !files.isEmpty() }">
                        <p>첨부파일이 없습니다.</p>
                    </div>

                    <hr>

                    <div class="bottom">
                        <div class="bottom-left">
                            <a th:href="@{/board/boardQnA}">
                                <button type="button" class="btn">목록</button>
                            </a>
                            <a href=#>
                                <button type="button" class="btn">답글</button>
                            </a>
                        </div>

                        <div class="bottom-right">
                            <a th:href=@{/board/qnaUpdate(id=${board.id})}>
                                <button type="button" class="btn">수정</button>
                            </a>
                            <a th:href="@{/board/qnaDelete?(id=${board.id})}">
                                <button type="button" class="btn" onclick="return delCheck()">삭제</button>
                            </a>
                        </div>
                    </div>
                    <div class="comment">
                        <p class=""><strong>댓글</strong></p>
                        <ul>
                            <li>
                                <div class="comment-info">
                                    <div class="writer">작성자</div>
                                    <div class="reg-time">23.12.07 16:08</div>
                                </div>
                                <p>기본게시판은 게시판용도로 다양하게 활용하실 수 있습니다. <br>
                                    사이트 내 공지사항, 기타 상담 게시판, 안내 게시판 등 기본적인 게</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

<div th:replace="~{/fragments/footer.html :: fragment-footer}"></div>


    <script>
        //태그 포함된 content를 HTML
        //let content = /*[[${#strings.escapeJavaScript(board.content)}]]*/ '';

        let content = document.querySelector("#content").value;
        document.querySelector(".text-box").innerHTML = content;

        function delCheck() {
            if(confirm("게시물을 삭제하시겠습니까?\n복구 할 수 없습니다. ")){
                return true;
            }
            return false;
        }

    </script>

</body>

</html>